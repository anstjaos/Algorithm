```java
class Solution {
    
    public List<String> validateCoupons(String[] codes, String[] businessLines, boolean[] isActives) {
        List<String> result = new ArrayList<>();

        Set<String> validBusinessLines = new HashSet<>(Arrays.asList(
            "electronics", "grocery", "pharmacy", "restaurant"
        ));

        List<String[]> validCoupons = new ArrayList<>();

        for (int i = 0; i < codes.length; i++) {
            if (isValid(codes[i], isActives[i], businessLines[i], validBusinessLines)) {
                validCoupons.add(new String[]{codes[i], businessLines[i]});
            }
        }

        String[] order = {"electronics", "grocery", "pharmacy", "restaurant"};
        for (String category : order) {
            List<String> temp = new ArrayList<>();
            for (String[] pair : validCoupons) {
                if (pair[1].equals(category)) {
                    temp.add(pair[0]);
                }
            }
            Collections.sort(temp);
            result.addAll(temp);
        }

        return result;
    }

    boolean isValid(String code, boolean isActive, String businessLine, Set<String> validBusinessLines) {
        if (code == null || code.length() == 0) return false;

        for (int i = 0; i < code.length(); i++) {
            char c = code.charAt(i);
            if (!Character.isLetterOrDigit(c) && c != '_') {
                return false;
            }
        }

        if (!validBusinessLines.contains(businessLine)) return false;
        if (!isActive) return false;

        return true;
    }
}
```